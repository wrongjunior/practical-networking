
# Основы TCP

## Что такое TCP?

TCP (Transmission Control Protocol) — это надёжный сетевой протокол, который обеспечивает доставку данных между устройствами через сеть. В отличие от UDP, TCP гарантирует, что все данные будут доставлены в правильном порядке и без потерь. Если какие-то данные потеряны в пути, TCP повторно отправит их.

Основной принцип работы TCP — это установка соединения между отправителем и получателем. Протокол сначала устанавливает связь, а затем передаёт данные по этой связи. После передачи данных TCP завершает соединение.

## Когда используется TCP?

TCP используется в тех случаях, когда важна надёжность передачи данных. Примеры таких приложений:
- **Веб-сайты** — когда вы посещаете веб-сайт, данные передаются через TCP для гарантии полной и правильной загрузки страницы.
- **Электронная почта** — когда вы отправляете или получаете письмо, оно передаётся через TCP.
- **Файловый обмен** — загрузка или передача файлов через сеть также требует надёжной передачи данных.

## Как работает TCP?

TCP — это протокол с установкой соединения. Вот как это происходит:
1. **Установление соединения**: передача данных начинается с процесса, известного как "трёхстороннее рукопожатие". Это означает, что отправитель и получатель договариваются о начале передачи данных.
2. **Передача данных**: данные разбиваются на пакеты, которые передаются и собираются в правильном порядке у получателя.
3. **Закрытие соединения**: после передачи данных соединение закрывается, и все ресурсы освобождаются.

Главная особенность TCP — это надёжность:
- **Контроль доставки**: если какой-то пакет потерян, он будет автоматически отправлен заново.
- **Контроль потока**: TCP регулирует объём данных, которые могут быть отправлены, чтобы не перегружать сеть.

## Пример использования TCP

Ниже приведён простой пример программы на языке Go, которая отправляет и принимает данные через TCP.

### Отправка сообщения

```go
package main

import (
    "net"
    "log"
)

func main() {
    conn, err := net.Dial("tcp", "127.0.0.1:8080")
    if err != nil {
        log.Fatal(err)
    }
    defer conn.Close()

    message := []byte("Привет, TCP!")
    _, err = conn.Write(message)
    if err != nil {
        log.Fatal(err)
    }
}
```

### Получение сообщения

```go
package main

import (
    "net"
    "log"
)

func main() {
    listener, err := net.Listen("tcp", "127.0.0.1:8080")
    if err != nil {
        log.Fatal(err)
    }
    defer listener.Close()

    conn, err := listener.Accept()
    if err != nil {
        log.Fatal(err)
    }
    defer conn.Close()

    buffer := make([]byte, 1024)
    _, err = conn.Read(buffer)
    if err != nil {
        log.Fatal(err)
    }

    log.Printf("Получено сообщение: %s", string(buffer))
}
```

Этот код демонстрирует простую передачу и приём данных через TCP на локальном хосте.

## Заключение

TCP — это протокол, который выбирают, когда важна надёжность передачи данных. Он широко используется в веб-технологиях, почтовых службах и при передаче файлов. TCP гарантирует, что ваши данные дойдут до получателя в целости и сохранности, даже если некоторые пакеты данных потеряются по пути.

