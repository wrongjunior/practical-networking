
# Отчет по задаче: Передача файла по TCP с подсчётом скорости передачи данных

## Описание задачи

Целью данного проекта было реализовать протокол передачи произвольного файла с одного компьютера на другой с помощью TCP. Для этого были разработаны сервер и клиент, взаимодействующие по протоколу TCP и отслеживающие скорость приёма и передачи данных.

## Видео демонстрация



https://github.com/user-attachments/assets/ada126e2-4540-4aea-a80e-e7a58e58e753



## Алгоритм работы сервера

1. Сервер принимает номер порта для прослушивания входящих соединений.
2. Для каждого клиента сервер выделяет отдельный поток, чтобы обрабатывать несколько соединений одновременно.
3. Сервер создает директорию `uploads`, если она не существует, для хранения переданных файлов.
4. При подключении клиента сервер получает от него информацию:
    - Длину имени файла.
    - Само имя файла.
    - Размер файла.
5. Сервер создает новый файл в директории `uploads` и записывает в него полученные данные.
6. Каждые 3 секунды сервер рассчитывает скорость передачи данных:
    - Мгновенная скорость — это количество данных, переданных за последние 3 секунды.
    - Средняя скорость — это общее количество переданных данных, делённое на общее время.
7. После завершения передачи сервер проверяет, совпадает ли количество полученных данных с ожидаемым размером файла.
8. Если передача успешна, сервер отправляет клиенту сигнал об успешной передаче.

### Потоковая обработка

Каждое новое подключение от клиента обрабатывается в отдельной горутине, что позволяет серверу одновременно работать с несколькими клиентами.

### Алгоритм расчета скорости

- Каждые 3 секунды сервер выводит:
    - Мгновенную скорость передачи (байт/с).
    - Среднюю скорость передачи (байт/с) на основе общего времени и общего объема переданных данных.

## Алгоритм работы клиента

1. Клиент принимает путь к файлу, хост сервера и порт в качестве аргументов командной строки.
2. Клиент устанавливает TCP-соединение с сервером.
3. Отправляет серверу:
    - Длину имени файла.
    - Имя файла.
    - Размер файла.
4. Затем клиент передаёт сам файл частями (по 32 КБ).
5. По завершении передачи данных клиент ожидает ответа от сервера:
    - Если передача прошла успешно, сервер отправляет сигнал успеха, который клиент выводит в консоль.

## Демонстрация

Для запуска сервера и клиента:

### Сервер:
```bash
./server <номер_порта>
```

### Клиент:
```bash
./client -file <путь_к_файлу> -host <адрес_сервера> -port <номер_порта>
```

После успешной передачи файла сервер выведет мгновенную и среднюю скорости, а клиент получит сообщение об успешной передаче файла.


